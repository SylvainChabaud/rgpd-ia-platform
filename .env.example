# ============================================================================
# RGPD-IA Platform - Environment Configuration Template
# ============================================================================
#
# SECURITY WARNING:
# - DO NOT commit this file with real secrets
# - Copy to .env and replace ALL placeholders
# - .env is git-ignored and MUST NEVER be committed
#
# PRODUCTION SETUP:
#   1. cp .env.example .env
#   2. Generate secrets: ./scripts/docker/init-secrets.sh
#   3. Edit .env with your values
#   4. Verify: ./scripts/docker/security-check.sh
#
# ============================================================================

# ----------------------------------------------------------------------------
# Environment
# ----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000

# ----------------------------------------------------------------------------
# Database Configuration (PostgreSQL 16)
# ----------------------------------------------------------------------------
DB_USER=rgpd_user
DB_PASSWORD=REPLACE_WITH_STRONG_PASSWORD
DB_NAME=rgpd_platform

# Database URL (for migrations and local access)
# Production: uses Docker secrets in docker-compose.yml
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@db:5432/${DB_NAME}

# ----------------------------------------------------------------------------
# Security Secrets (CRITICAL - Generate unique values)
# ----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
#
# SESSION_SECRET: Used for session signing (Express/Next.js)
# JWT_SECRET: Used for JWT token signing (IAM)
# BOOTSTRAP_PLATFORM_SECRET: Used for platform bootstrap CLI
#
# ⚠️ PRODUCTION: Use Docker secrets (secrets/*.txt files)
# ⚠️ DEVELOPMENT: Generate and store in .env (NOT .env.example)

SESSION_SECRET=REPLACE_WITH_SESSION_SECRET_64_CHARS_HEX
JWT_SECRET=REPLACE_WITH_JWT_SECRET_64_CHARS_HEX
BOOTSTRAP_PLATFORM_SECRET=REPLACE_WITH_BOOTSTRAP_SECRET_64_CHARS_HEX

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
# Enable bootstrap mode (ONLY for initial platform setup)
ENABLE_BOOTSTRAP_MODE=false

# ----------------------------------------------------------------------------
# Observability (LOT 6.1)
# ----------------------------------------------------------------------------
# LOG_LEVEL: error | warn | info | debug
# ⚠️ Production: use 'info' or 'warn' (debug exposes too much)
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# AI Gateway Configuration (LOT 3.0)
# ----------------------------------------------------------------------------
# AI_PROVIDER: stub (safe default) | ollama (local LLM)
AI_PROVIDER=stub

# Ollama Configuration (if AI_PROVIDER=ollama)
# Docker: use service name 'ollama'
# Local: use 'localhost' or '127.0.0.1'
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL=tinyllama
OLLAMA_TIMEOUT=30000

# ----------------------------------------------------------------------------
# TLS/SSL Configuration (Reverse Proxy)
# ----------------------------------------------------------------------------
# Domain for Let's Encrypt certificate
# DOMAIN=example.com
# SSL_EMAIL=admin@example.com

# ----------------------------------------------------------------------------
# RGPD Configuration (LOT 5.x)
# ----------------------------------------------------------------------------
# Export TTL (in days) - default 7 days
RGPD_EXPORT_TTL_DAYS=7

# Purge delay (in days) - default 30 days after soft delete
RGPD_PURGE_DELAY_DAYS=30

# ----------------------------------------------------------------------------
# CORS Configuration (LOT 5.3)
# ----------------------------------------------------------------------------
# Allowed origins for CORS (comma-separated)
# Production: use your frontend domain(s)
# Development: use localhost ports
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ----------------------------------------------------------------------------
# Docker Development Override (docker-compose.dev.yml)
# ----------------------------------------------------------------------------
# DB_USER=devuser
# DB_PASSWORD=devpass
# AI_PROVIDER=stub
# LOG_LEVEL=debug
